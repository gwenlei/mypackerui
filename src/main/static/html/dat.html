<html>
<head>
<meta   http-equiv="Expires"   CONTENT="0">
<meta   http-equiv="Cache-Control"   CONTENT="no-cache">
<meta   http-equiv="Pragma"   CONTENT="no-cache">
<link href="static/css/bootstrap.min.css" rel="stylesheet">
<script src="static/js/jquery.min.js"></script>
<script src="static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/test2.js"></script>
<script type="text/javascript">
divnum=1;
filename="static/data/dataqemu.json";
settingfilename="static/data/settingfile.json"
function adddiv(divp,id,field)
{
var partdiv=document.createElement("div");
partdiv.id="partdiv"+divnum;
partdiv.className="row";
document.getElementById(divp).appendChild(partdiv);

var parttext1div=document.createElement("div");
parttext1div.id="parttext1div"+divnum;
parttext1div.className="col-sm-offset-1 col-sm-4";
var parttext1=document.createElement("input");
parttext1.id=divp+"+"+"fieldid";
parttext1.name=divp+"+"+"fieldid";
parttext1.type="text";
parttext1.value=id;
parttext1.className="form-control";
document.getElementById(partdiv.id).appendChild(parttext1div);
document.getElementById(parttext1div.id).appendChild(parttext1);

var parttext2div=document.createElement("div");
parttext2div.id="parttext2div"+divnum;
parttext2div.className="col-sm-5";
var parttext2=document.createElement("input");
parttext2.id=divp+"+"+"fieldvalue";
parttext2.name=divp+"+"+"fieldvalue";
parttext2.type="text";
parttext2.value=field;
parttext2.className="form-control";
document.getElementById(partdiv.id).appendChild(parttext2div);
document.getElementById(parttext2div.id).appendChild(parttext2);

var partbuttondiv=document.createElement("div");
partbuttondiv.id="partbuttondiv"+divnum;
var partbutton=document.createElement("input");
partbutton.id="delete"+divnum;
partbutton.type="button";
partbutton.value="delete";
partbutton.className="btn btn-default";
partbutton.onclick=function(){deletediv(this)};
document.getElementById(partdiv.id).appendChild(partbuttondiv);
document.getElementById(partbuttondiv.id).appendChild(partbutton);

divnum=divnum+1;
}
function deletediv(obj){
    var strid=obj.id;  
    var o=document.getElementById(obj.id);  
    var z=o.parentElement;  
    var zz=document.getElementById(z.id).parentElement; 
    var stridone=zz.id;  
    var my = document.getElementById(stridone);  
    if (my != null){  
    my.parentNode.removeChild(my);}  
}
$(document).ready(function(){
			$.getJSON(filename,function(result){
                                $.each(result.jsonmap, function(i, field){
                                        adddiv("jsonmap",i,field)
					});
                                $.each(result.cfgmap, function(i, field){
                                        adddiv("cfgmap",i,field)
					});
                                $.each(result.isomap, function(i, field){
                                        adddiv("isomap",i,field)
					});
                                $.each(result.md5map, function(i, field){
                                        adddiv("md5map",i,field)
					});
                                $.each(result.scriptmap, function(i, field){
                                        adddiv("scriptmap",i,field)
					});
                                $.each(result.resultmap, function(i, field){
                                        adddiv("resultmap",i,field)
					});
                                $.each(result.servermap, function(i, field){
                                        adddiv("servermap",i,field)
					});
                                $.each(result.floppymap, function(i, field){
                                        adddiv("floppymap",i,field)
					});
 				});
			$.getJSON(settingfilename,function(result){
                                $.each(result, function(i, field){
                                        $.each(field, function(i, field){
                                           $("#settingfile").append("<option value='"+field+"'>"+field+"</option>");
					});
                                        
				});
 		        });

		});
function changefile(name)
{
filename=name;
var divs= new Array("jsonmap","cfgmap","isomap","md5map","scriptmap","resultmap","servermap","floppymap");
for(var key in divs){
    $("#"+divs[key]).empty();
}
			$.getJSON(filename,function(result){
                                $.each(result.jsonmap, function(i, field){
                                        adddiv("jsonmap",i,field)
					});
                                $.each(result.cfgmap, function(i, field){
                                        adddiv("cfgmap",i,field)
					});
                                $.each(result.isomap, function(i, field){
                                        adddiv("isomap",i,field)
					});
                                $.each(result.md5map, function(i, field){
                                        adddiv("md5map",i,field)
					});
                                $.each(result.scriptmap, function(i, field){
                                        adddiv("scriptmap",i,field)
					});
                                $.each(result.resultmap, function(i, field){
                                        adddiv("resultmap",i,field)
					});
                                $.each(result.servermap, function(i, field){
                                        adddiv("servermap",i,field)
					});
                                $.each(result.floppymap, function(i, field){
                                        adddiv("floppymap",i,field)
					});
 				});
}
</script>
</head>

<body>
</br>
<div class="container-fluid">
	<div class="row">
		<div class="col-md-4">
                      <form class="form-horizontal"  id="form1" name="form1" action="/setdat" method="post">


				<div class="form-group">
					<label for="filename" class="col-sm-2 control-label">Settingfile</label>
					<div class="col-sm-8">
						<select class="form-control"  id="settingfile" name="settingfile" onchange="changefile(this.value)" >
						</select>
                                                
					</div>

				</div>

                      <div id="jsonmapb" class="form-group" >
					<div class="col-sm-12">
                                                <label for="jsonmapb" class="control-label">jsonmap</label>
						<button type="button" class="btn btn-default" id="jsonmapb" onclick="adddiv('jsonmap','newid','newvalue')">add</button>
					</div>
		      </div>
                      <div id="jsonmap" class="form-group" >
		      </div>

                      <div id="cfgmapb" class="form-group" >
					<div class="col-sm-12">
                                                <label for="cfgmapb" class="control-label">cfgmap</label>
						<button type="button" class="btn btn-default" id="cfgmapb" onclick="adddiv('cfgmap','newid','newvalue')">add</button>
					</div>
		      </div>
                      <div id="cfgmap" class="form-group" >
		      </div>


                      <div id="isomapb" class="form-group" >
					<div class="col-sm-12">
                                                <label for="isomapb" class="control-label">isomap</label>
						<button type="button" class="btn btn-default" id="isomapb" onclick="adddiv('isomap','newid','newvalue')">add</button>
					</div>
		      </div>
                      <div id="isomap" class="form-group" >
		      </div>

                      <div id="md5mapb" class="form-group" >
					<div class="col-sm-12">
                                                <label for="md5mapb" class="control-label">md5map</label>
						<button type="button" class="btn btn-default" id="md5mapb" onclick="adddiv('md5map','newid','newvalue')">add</button>
					</div>
		      </div>
                      <div id="md5map" class="form-group" >
                      </div>

                      <div id="scriptmapb" class="form-group" >
					<div class="col-sm-12">
                                                <label for="scriptmapb" class="control-label">scriptmap</label>
						<button type="button" class="btn btn-default" id="scriptmapb" onclick="adddiv('scriptmap','newid','newvalue')">add</button>
					</div>
		      </div>
                      <div id="scriptmap" class="form-group" >
		      </div>

                      <div id="resultmapb" class="form-group" >
					<div class="col-sm-12">
                                                <label for="resultmapb" class="control-label">resultmap</label>
						<button type="button" class="btn btn-default" id="resultmapb" onclick="adddiv('resultmap','newid','newvalue')">add</button>
					</div>
		      </div>
                      <div id="resultmap" class="form-group" >
		      </div>

                      <div id="servermapb" class="form-group" >
					<div class="col-sm-12">
                                                <label for="servermapb" class="control-label">servermap</label>
						<button type="button" class="btn btn-default" id="servermapb" onclick="adddiv('servermap','newid','newvalue')">add</button>
					</div>
		      </div>
                      <div id="servermap" class="form-group" >
		      </div>

                      <div id="floppymapb" class="form-group" >
					<div class="col-sm-12">
                                                <label for="floppymapb" class="control-label">floppymap</label>
						<button type="button" class="btn btn-default" id="floppymapb" onclick="adddiv('floppymap','newid','newvalue')">add</button>
					</div>
		      </div>
                      <div id="floppymap" class="form-group" >
		      </div>

                      <div class="form-group">
					<div class="col-sm-10">
						<button type="submit" class="btn btn-default">Save</button>
					</div>
				</div>
                      </form>
                </div>
        </div>
</div>
</body>
</html>
